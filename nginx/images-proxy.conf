# Nginx configuration for image proxy
# This proxies requests from /images/* to the internal image server
# Install this on the stadium server (10.120.0.24)

# Add this to your nginx server block or include it in nginx.conf

location /images/ {
    # Proxy to internal image server
    proxy_pass http://10.108.0.19/Imagenes/;

    # Proxy headers
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # Cache settings for images
    proxy_cache_valid 200 24h;
    proxy_cache_valid 404 1m;

    # Timeout settings
    proxy_connect_timeout 10s;
    proxy_send_timeout 30s;
    proxy_read_timeout 30s;

    # Buffer settings
    proxy_buffering on;
    proxy_buffer_size 4k;
    proxy_buffers 8 32k;

    # Allow large images
    client_max_body_size 10M;

    # CORS headers (if needed for external access)
    add_header Access-Control-Allow-Origin *;
    add_header Cache-Control "public, max-age=86400";
}
